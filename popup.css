/* popup.css */

/* Define CSS Variables for theming (Light and Dark Mode) */
:root {
  /* Light Mode Colors */
  --bg-color-light: #f9fafb; /* gray-50 */
  --text-color-light: #1f2937; /* Dark gray */
  --header-text-color-light: #111827; /* Darker gray */
  --card-bg-light: #ffffff; /* White */
  --border-color-light: #e5e7eb; /* Light border */

  /* Primary Action Button (Blue) */
  --primary-button-bg-light: #2563eb; /* blue-600 */
  --primary-button-hover-bg-light: #1d4ed8; /* blue-700 */
  --primary-button-border-light: #1e40af; /* Darker blue for subtle border */

  /* Secondary Action Button (Emerald for Scan, gray for general secondary) */
  --secondary-button-bg-light: #6b7280; /* gray-500 */
  --secondary-button-hover-bg-light: #4b5563; /* gray-600 */
  --secondary-button-border-light: #4b5563;
  
  --emerald-button-bg-light: #059669; /* emerald-600 */
  --emerald-button-hover-bg-light: #047857; /* emerald-700 */
  --emerald-button-border-light: #047857;

  --input-border-light: #d1d5db; /* gray-300 */
  --input-focus-ring-light: #60a5fa; /* blue-400 */
  --input-focus-ring-rgb-values-light: 96, 165, 250;

  /* Drop Area */
  --drop-area-border-light: #60a5fa; /* blue-400 */
  --drop-area-bg-light: #eff6ff; /* blue-50 */
  --drop-area-hover-bg-light: #dbeafe; /* blue-100 */
  --drop-area-text-light: #6b7280; /* gray-500 */
  --drop-area-hover-text-light: #1e40af; /* blue-800 */
  
  /* File Status Message */
  --file-status-success-bg-light: #d1fae5; /* green-100 */
  --file-status-success-border-light: #34d399; /* green-400 */
  --file-status-success-text-light: #065f46; /* green-700 */
  --file-status-success-icon-light: #10b981; /* green-500 */

  --file-status-error-bg-light: #fee2e2; /* red-100 */
  --file-status-error-border-light: #f87171; /* red-400 */
  --file-status-error-text-light: #991b1b; /* red-700 */
  --file-status-error-icon-light: #ef4444; /* red-500 */

  --file-status-info-bg-light: #e0f2fe; /* blue-100 */
  --file-status-info-border-light: #60a5fa; /* blue-400 */
  --file-status-info-text-light: #1e40af; /* blue-700 */
  --file-status-info-icon-light: #3b82f6; /* blue-500 */

  /* Headers List Badges */
  --header-badge-bg-light: #e0e7ff; /* indigo-100 */
  --header-badge-text-light: #3730a3; /* indigo-800 */
  --header-badge-hover-bg-light: #c7d2fe; /* indigo-200 */
  
  /* Auto-Mapped Badges */
  --auto-mapped-learned-bg: #bfdbfe; /* blue-200 */
  --auto-mapped-learned-text: #1e40af; /* blue-800 */
  --auto-mapped-fuzzy-bg: #d1fae5; /* green-200 */
  --auto-mapped-fuzzy-text: #065f46; /* green-800 */
  --auto-mapped-unmapped-bg: #e5e7eb; /* gray-200 */
  --auto-mapped-unmapped-text: #4b5563; /* gray-800 */

  /* Tab Buttons */
  --tab-button-bg: #e5e7eb; /* gray-200 */
  --tab-button-hover-bg: #d1d5db; /* gray-300 */
  --tab-button-active-bg: #ffffff;
  --tab-button-active-text: #2563eb; /* blue-600 */
  --tab-button-text: #4b5563; /* gray-700 */
  
  /* Clickable Elements List */
  --clickable-container-bg: #f9fafb; /* gray-50 */
  --clickable-item-border: #e5e7eb; /* gray-200 */
  --clickable-item-hover-bg: #f3f4f6; /* gray-100 */
  --selected-button-highlight-bg: #e0f2fe; /* blue-100 */
  --selected-button-highlight-border: #93c5fd; /* blue-300 */

  /* New & Refined Shadows (Light Mode) */
  --main-container-shadow-light: 
    0 15px 30px -10px rgba(0, 0, 0, 0.15), /* Larger, softer base */
    0 8px 15px -5px rgba(0, 0, 0, 0.1);    /* Deeper, more defined */
  --card-shadow-light: 
    0 6px 12px -4px rgba(0, 0, 0, 0.1), /* Slightly larger base for cards */
    0 3px 6px -2px rgba(0, 0, 0, 0.08);   /* More defined top layer */

  --primary-button-shadow-light: 
    0 10px 20px -5px rgba(37, 99, 235, 0.4), /* Primary blue with strong, colored shadow */
    0 4px 6px -2px rgba(37, 99, 235, 0.2);
  --emerald-button-shadow-light: 
    0 10px 20px -5px rgba(5, 150, 105, 0.4), /* Emerald with strong, colored shadow */
    0 4px 6px -2px rgba(5, 150, 105, 0.2);
  --secondary-button-shadow-light: 
    0 8px 15px -4px rgba(107, 114, 128, 0.25), /* Gray with moderate shadow */
    0 3px 5px -1px rgba(107, 114, 128, 0.1);

  --tab-button-active-shadow-light: 
    0 8px 16px rgba(0,0,0,0.15), 
    0 4px 8px rgba(0,0,0,0.1);

  --drop-area-inner-shadow-light: inset 0 2px 4px rgba(0, 0, 0, 0.06);

  --header-badge-shadow-light: 0 2px 4px rgba(0,0,0,0.1);
}

/* Dark Mode Overrides (Default Light Mode values are above) */
body.dark {
  --bg-color-dark: #1f2937; /* gray-800 */
  --text-color-dark: #e5e7eb; /* Light gray */
  --header-text-color-dark: #f8fafc; /* White */
  --card-bg-dark: #2d3748; /* Darker card */
  --border-color-dark: #4a5568; /* Dark border */

  --primary-button-bg-dark: #4f46e5; /* indigo-600 */
  --primary-button-hover-bg-dark: #4338ca; /* indigo-700 */
  --primary-button-border-dark: #3730a3; /* Darker indigo for subtle border */

  --secondary-button-bg-dark: #4a5568; /* gray-700 */
  --secondary-button-hover-bg-dark: #616e80; /* gray-600 */
  --secondary-button-border-dark: #2d3748;
  
  --emerald-button-bg-dark: #065f46; /* emerald-800 */
  --emerald-button-hover-bg-dark: #047857; /* emerald-700 */
  --emerald-button-border-dark: #047857;

  --input-border-dark: #4a5568; /* gray-700 */
  --input-focus-ring-dark: #818cf8; /* indigo-400 */
  --input-focus-ring-rgb-values-dark: 129, 140, 248;

  --drop-area-border-dark: #6366f1; /* indigo-500 */
  --drop-area-bg-dark: #3730a3; /* indigo-900 */
  --drop-area-hover-bg-dark: #4f46e5; /* indigo-700 */
  --drop-area-text-dark: #a0aec0; /* gray-400 */
  --drop-area-hover-text-dark: #e0e7ff; /* indigo-100 */

  --file-status-success-bg-dark: #065f46; /* green-900 */
  --file-status-success-border-dark: #34d399; /* green-400 */
  --file-status-success-text-dark: #d1fae5; /* green-100 */
  --file-status-success-icon-dark: #10b981; /* green-500 */

  --file-status-error-bg-dark: #7f1d1d; /* red-900 */
  --file-status-error-border-dark: #f87171; /* red-400 */
  --file-status-error-text-dark: #fee2e2; /* red-100 */
  --file-status-error-icon-dark: #ef4444; /* red-500 */

  --file-status-info-bg-dark: #1e3a8a; /* blue-900 */
  --file-status-info-border-dark: #60a5fa; /* blue-400 */
  --file-status-info-text-dark: #e0f2fe; /* blue-100 */
  --file-status-info-icon-dark: #3b82f6; /* blue-500 */

  --header-badge-bg-dark: #4338ca; /* indigo-700 */
  --header-badge-text-dark: #e0e7ff; /* indigo-100 */
  --header-badge-hover-bg-dark: #4f46e5; /* indigo-600 */

  --auto-mapped-learned-bg: #4c51bf; /* indigo-700 */
  --auto-mapped-learned-text: #e0e7ff; /* indigo-100 */
  --auto-mapped-fuzzy-bg: #14532d; /* green-900 */
  --auto-mapped-fuzzy-text: #dcfce7; /* green-100 */
  --auto-mapped-unmapped-bg: #4a5568; /* gray-700 */
  --auto-mapped-unmapped-text: #a0aec0; /* gray-400 */

  /* Tab Buttons */
  --tab-button-bg-dark: #2d3748; /* gray-800 */
  --tab-button-hover-bg-dark: #4a5568; /* gray-700 */
  --tab-button-active-bg-dark: #6366f1; /* indigo-500 */
  --tab-button-active-text-dark: #ffffff;
  --tab-button-text-dark: #e2e8f0; /* gray-200 */
  
  /* Clickable Elements List */
  --clickable-container-bg: #2d3748; /* gray-800 */
  --clickable-item-border: #4a5568; /* gray-700 */
  --clickable-item-hover-bg: #4a5568; /* gray-700 */
  --selected-button-highlight-bg: #4f46e5; /* indigo-600 */
  --selected-button-highlight-border: #a5b4fc; /* indigo-300 */

  /* New & Refined Shadows (Dark Mode) */
  --main-container-shadow-dark: 
    0 15px 30px -10px rgba(0, 0, 0, 0.35), 
    0 8px 15px -5px rgba(0, 0, 0, 0.2);
  --card-shadow-dark: 
    0 6px 12px -4px rgba(0, 0, 0, 0.2), 
    0 3px 6px -2px rgba(0, 0, 0, 0.15);
  
  --primary-button-shadow-dark: 
    0 10px 20px -5px rgba(79, 70, 229, 0.4), 
    0 4px 6px -2px rgba(79, 70, 229, 0.2);
  --emerald-button-shadow-dark: 
    0 10px 20px -5px rgba(6, 95, 70, 0.4), 
    0 4px 6px -2px rgba(6, 95, 70, 0.2);
  --secondary-button-shadow-dark: 
    0 8px 15px -4px rgba(74, 85, 104, 0.25), 
    0 3px 5px -1px rgba(74, 85, 104, 0.1);

  --tab-button-active-shadow-dark: 
    0 8px 16px rgba(0,0,0,0.3), 
    0 4px 8px rgba(0,0,0,0.15);

  --drop-area-inner-shadow-dark: inset 0 2px 4px rgba(0, 0, 0, 0.1);

  --header-badge-shadow-dark: 0 2px 4px rgba(0,0,0,0.2);
}

/* Base styles for the body, applied in light mode by default */
body {
    font-family: 'Inter', sans-serif;
    background-color: var(--bg-color-light);
    color: var(--text-color-light);
    transition: background-color 0.3s ease, color 0.3s ease;
    box-sizing: border-box;
    min-width: 320px; /* Ensure a minimum width for small screens */
    /* Prevent scrollbars for the main content unless needed */
    overflow-x: hidden;
}

/* Explicitly hide the default file input */
#fileInputAutoFill, #fileInputFullAutomation { /* Updated IDs */
    display: none !important;
}

/* Main Container styling */
.main-container {
    padding: 1.5rem; /* Generous padding */
    background-color: var(--card-bg-light);
    border-radius: 0.75rem; /* Rounded corners */
    /* Refined shadow for a softer, more layered look */
    box-shadow: var(--main-container-shadow-light);
    border: 1px solid var(--border-color-light); /* Added a subtle border */
    position: relative; /* For theme switch positioning */
    transition: background-color 0.3s ease, box-shadow 0.3s ease, border-color 0.3s ease;
}

/* Section and Card Headings */
.section-heading, .card-heading {
    color: var(--header-text-color-light);
    border-color: var(--border-color-light);
    transition: color 0.3s ease, border-color 0.3s ease;
}

/* Card Styling */
.card {
    background-color: var(--card-bg-light);
    padding: 1.25rem; /* Generous padding */
    border: 1px solid var(--border-color-light);
    border-radius: 0.75rem;
    /* Refined shadow for cards */
    box-shadow: var(--card-shadow-light);
    margin-bottom: 1.5rem; /* Space between cards */
    transition: background-color 0.3s ease, border-color 0.3s ease, box-shadow 0.3s ease;
}

/* Generic Action Button Styling */
.action-button {
    display: flex; /* Flexbox for icon and text alignment */
    align-items: center;
    justify-content: center;
    padding: 0.85rem 1.75rem; /* Slightly increased vertical padding for better feel */
    border-radius: 9999px; /* Fully rounded (pill shape) */
    font-weight: 600;
    transition: background-color 0.3s ease, transform 0.1s ease, box-shadow 0.3s ease, border-color 0.3s ease;
    border: 1px solid transparent; /* Subtle border for precision */
    cursor: pointer;
    font-size: 1rem;
    line-height: 1.5rem;
    outline: none; /* Remove default focus outline */
    /* Remove base box-shadow here, specific button classes will apply their own */
    box-shadow: none; 
}
.action-button:hover {
    transform: translateY(-3px); /* More pronounced lift */
    /* Box shadow handled by specific button types using their hover colors */
}
.action-button:active {
    transform: translateY(0); /* Press down effect */
    /* Box shadow handled by specific button types */
}
.action-button:focus-visible {
    /* Custom focus ring for accessibility, simpler now */
    box-shadow: 0 0 0 4px rgba(var(--focus-ring-color-rgb), 0.5); 
}
.action-button:disabled { /* Styling for disabled buttons */
    opacity: 0.6;
    cursor: not-allowed;
    transform: none; /* Disable lift effect when disabled */
    box-shadow: none;
}


/* Specific button colors (light mode) */
.action-button.primary {
    background-color: var(--primary-button-bg-light);
    color: #fff;
    border-color: var(--primary-button-border-light);
    box-shadow: var(--primary-button-shadow-light); /* Apply defined shadow */
    --focus-ring-color-rgb: 37, 99, 235; /* RGB for blue-600 */
}
.action-button.primary:hover:not(:disabled) {
    background-color: var(--primary-button-hover-bg-light);
    box-shadow: 0 15px 30px -10px rgba(37, 99, 235, 0.5), 0 6px 10px -3px rgba(37, 99, 235, 0.3); /* Even stronger hover shadow */
}

.action-button.emerald {
    background-color: var(--emerald-button-bg-light);
    color: #fff;
    border-color: var(--emerald-button-border-light);
    box-shadow: var(--emerald-button-shadow-light);
    --focus-ring-color-rgb: 5, 150, 105; /* RGB for emerald-600 */
}
.action-button.emerald:hover:not(:disabled) {
    background-color: var(--emerald-button-hover-bg-light);
    box-shadow: 0 15px 30px -10px rgba(5, 150, 105, 0.5), 0 6px 10px -3px rgba(5, 150, 105, 0.3);
}

.action-button.secondary {
    background-color: var(--secondary-button-bg-light);
    color: #fff; /* White text for better contrast on gray */
    border-color: var(--secondary-button-border-light);
    box-shadow: var(--secondary-button-shadow-light); /* Lighter shadow */
    --focus-ring-color-rgb: 107, 114, 128; /* gray-500 RGB */
}
.action-button.secondary:hover:not(:disabled) {
    background-color: var(--secondary-button-hover-bg-light);
    box-shadow: 0 12px 20px -8px rgba(107, 114, 128, 0.35), 0 5px 8px -2px rgba(107, 114, 128, 0.15);
}

/* Form Input Styling */
.form-input {
    border: 1px solid var(--input-border-light);
    border-radius: 0.5rem; /* Rounded corners */
    padding: 0.625rem 1rem;
    width: 100%;
    background-color: var(--card-bg-light); /* Consistent with card background */
    color: var(--text-color-light);
    transition: border-color 0.2s ease, box-shadow 0.2s ease;
    -webkit-appearance: none; /* Remove default browser styling */
    -moz-appearance: none;
    appearance: none;
}
.form-input:focus {
    border-color: var(--input-focus-ring-light);
    outline: none;
    box-shadow: 0 0 0 3px rgba(var(--input-focus-ring-rgb-values-light), 0.3); /* Custom focus ring */
}
.form-input:disabled { /* Styling for disabled inputs */
    background-color: #f3f4f6; /* Lighter gray for disabled */
    cursor: not-allowed;
    opacity: 0.7;
}
body.dark .form-input:disabled {
    background-color: #374151; /* Darker gray for disabled in dark mode */
}


/* File Drop Area Styling */
.drop-area {
    border: 2px dashed var(--drop-area-border-light);
    border-radius: 0.75rem;
    padding: 2rem;
    text-align: center;
    background-color: var(--drop-area-bg-light);
    transition: background-color 0.3s ease, border-color 0.3s ease, color 0.3s ease;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 10rem;
    box-shadow: var(--drop-area-inner-shadow-light); /* Added inner shadow */
}
.drop-area:hover {
    background-color: var(--drop-area-hover-bg-light);
    border-color: var(--primary-button-bg-light); /* Highlight border on hover */
}
.drop-area p {
    color: var(--drop-area-text-light);
    margin-bottom: 1rem;
    font-size: 1.125rem;
    font-weight: 500;
}
.drop-area:hover p {
    color: var(--drop-area-hover-text-light);
}
.browse-button {
    display: inline-block;
    background-color: var(--primary-button-bg-light);
    color: #fff;
    padding: 0.85rem 2rem; /* Adjusted to match action button padding */
    border-radius: 9999px;
    font-size: 1.125rem;
    font-weight: 600;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: background-color 0.3s ease, box-shadow 0.3s ease;
    cursor: pointer;
}
.browse-button:hover {
    background-color: var(--primary-button-hover-bg-light);
    box-shadow: 0 6px 10px -2px rgba(0, 0, 0, 0.15), 0 3px 6px -2px rgba(0, 0, 0, 0.08);
}

/* File Status Message Styling */
.file-status {
    padding: 0.875rem 1.25rem;
    border-radius: 0.625rem;
    font-size: 0.95rem;
    font-weight: 500;
    line-height: 1.4;
    display: flex;
    align-items: center;
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
.file-status.message-success {
    background-color: var(--file-status-success-bg-light);
    border: 1px solid var(--file-status-success-border-light);
    color: var(--file-status-success-text-light);
}
.file-status.message-success #fileStatusIconAutoFill,
.file-status.message-success #fileStatusIconFullAutomation { /* Updated IDs */
    color: var(--file-status-success-icon-light);
}
.file-status.message-error {
    background-color: var(--file-status-error-bg-light);
    border: 1px solid var(--file-status-error-border-light);
    color: var(--file-status-error-text-light);
}
.file-status.message-error #fileStatusIconAutoFill,
.file-status.message-error #fileStatusIconFullAutomation { /* Updated IDs */
    color: var(--file-status-error-icon-light);
}
.file-status.message-info {
    background-color: var(--file-status-info-bg-light);
    border: 1px solid var(--file-status-info-border-light);
    color: var(--file-status-info-text-light);
}
.file-status.message-info #fileStatusIconAutoFill,
.file-status.message-info #fileStatusIconFullAutomation { /* Updated IDs */
    color: var(--file-status-info-icon-light);
}

/* Headers List Styling (Badges) */
.headers-list {
    display: flex;
    flex-wrap: wrap;
    gap: 0.75rem; /* Space between headers */
    margin-bottom: 2rem;
}
.headers-list span {
    background-color: var(--header-badge-bg-light);
    color: var(--header-badge-text-light);
    padding: 0.6rem 1.25rem;
    border-radius: 9999px;
    font-size: 0.95rem;
    font-weight: 500;
    box-shadow: var(--header-badge-shadow-light); /* Added badge shadow */
    transition: background-color 0.2s ease, box-shadow 0.2s ease;
    display: flex;
    align-items: center;
    cursor: default;
}
.headers-list span:hover {
    background-color: var(--header-badge-hover-bg-light);
}

/* Checkbox/Radio Labels (Custom appearance) */
.checkbox-label, .radio-label {
    display: flex;
    align-items: center;
    cursor: pointer;
    color: var(--text-color-light);
}
.checkbox-label input[type="checkbox"], .radio-label input[type="radio"] {
    height: 1.125rem;
    width: 1.125rem;
    border: 1px solid var(--input-border-light);
    border-radius: 0.25rem; /* For checkboxes */
    background-color: var(--card-bg-light);
    transition: background-color 0.2s ease, border-color 0.2s ease;
    -webkit-appearance: none;
    -moz-appearance: none;
    appearance: none;
    flex-shrink: 0;
    margin-right: 0.5rem;
}
.checkbox-label input[type="checkbox"]:checked, .radio-label input[type="radio"]:checked {
    background-color: var(--primary-button-bg-light); /* Use primary color when checked */
    border-color: var(--primary-button-bg-light);
    position: relative;
}
.checkbox-label input[type="checkbox"]:checked::after {
    content: '\2713'; /* Checkmark unicode character */
    font-size: 0.75rem;
    color: white;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
.radio-label input[type="radio"] {
    border-radius: 50%; /* Make radio buttons round */
}
.radio-label input[type="radio"]:checked::after {
    content: '';
    width: 0.5rem;
    height: 0.5rem;
    background-color: white;
    border-radius: 50%;
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
}
.checkbox-label input[type="checkbox"]:focus, .radio-label input[type="radio"]:focus {
    outline: none;
    box-shadow: 0 0 0 3px rgba(var(--input-focus-ring-rgb-values-light), 0.3);
}

/* General Message Boxes (info, success, error) */
.message-box {
    padding: 0.875rem 1rem;
    border-radius: 0.5rem;
    font-size: 0.9rem;
    font-weight: 500;
    line-height: 1.4;
    display: flex;
    align-items: center;
    margin-top: 1rem;
    transition: background-color 0.3s ease, color 0.3s ease, border-color 0.3s ease;
}
.message-box i {
    margin-right: 0.75rem;
    font-size: 1.1rem;
}
.message-success {
    background-color: #d1fae5; /* green-100 */
    border-left: 4px solid #10b981; /* green-600 */
    color: #065f46; /* green-900 */
}
.message-error {
    background-color: #fee2e2; /* red-100 */
    border-left: 4px solid #dc2626; /* red-600 */
    color: #7f1d1d; /* red-900 */
}
.message-info {
    background-color: #e0f2fe; /* blue-100 */
    border-left: 4px solid #0284c7; /* light-blue-700 */
    color: #1e3a8a; /* blue-900 */
}

/* Loading Spinner Animation */
.loading-spinner {
    border: 4px solid rgba(0, 0, 0, 0.1);
    border-left-color: var(--primary-button-bg-light); /* Uses primary color for spin */
    border-radius: 50%;
    width: 24px;
    height: 24px;
    animation: spin 1s linear infinite;
    display: inline-block;
    vertical-align: middle;
    margin-left: 0.5rem;
}
@keyframes spin {
    to { transform: rotate(360deg); }
}

/* Badges for Auto-Mapped Fields */
.auto-mapped-badge {
    display: inline-block;
    font-size: 0.7rem;
    font-weight: 600;
    padding: 0.2rem 0.6rem;
    border-radius: 9999px;
    margin-left: 0.75rem;
    white-space: nowrap;
    transition: background-color 0.3s ease, color 0.3s ease;
}
.auto-mapped-badge.learned {
    background-color: var(--auto-mapped-learned-bg);
    color: var(--auto-mapped-learned-text);
}
.auto-mapped-badge.fuzzy {
    background-color: var(--auto-mapped-fuzzy-bg);
    color: var(--auto-mapped-fuzzy-text);
}
.auto-mapped-badge.unmapped {
    background-color: var(--auto-mapped-unmapped-bg);
    color: var(--auto-mapped-unmapped-text);
}

/* Tab Styling */
.tab-buttons {
    display: flex;
    gap: 0.5rem;
    margin-bottom: 1.5rem;
    padding: 0.375rem;
    background-color: var(--tab-button-bg);
    border-radius: 0.75rem;
    box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.05);
    transition: background-color 0.3s ease;
}
.tab-button {
    flex-grow: 1;
    padding: 0.625rem 1rem;
    border-radius: 0.625rem;
    text-align: center;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.3s ease-in-out;
    background-color: transparent;
    color: var(--tab-button-text);
    border: none;
}
.tab-button:hover {
    background-color: var(--tab-button-hover-bg);
}
.tab-button.active {
    background-color: var(--tab-button-active-bg);
    color: var(--tab-button-active-text);
    box-shadow: var(--tab-button-active-shadow-light); /* Applied new shadow */
    transform: translateY(-1px); /* Slight lift for active tab */
    font-weight: 600;
}
.tab-button i {
    margin-right: 0.5rem;
}
.tab-content {
    transition: opacity 0.3s ease-in-out;
}
.tab-content.hidden {
    display: none;
}

/* Field Mapping Group Item */
.field-mapping-group-item {
    padding: 1rem; /* Slightly less padding than main card */
    margin-bottom: 1rem; /* Space between mapping groups */
}
.field-mapping-group-item .group-mapper {
    border: 1px solid var(--input-border-light);
    border-radius: 0.5rem;
    padding: 0.5rem 0.75rem;
    background-color: var(--card-bg-light);
    color: var(--text-color-light);
}

/* Specific styles for Auto Click section */
#clickableButtonsContainer {
    max-height: 15rem;
    overflow-y: auto;
    border: 1px solid var(--clickable-item-border);
    border-radius: 0.5rem;
    background-color: var(--clickable-container-bg);
    padding: 0.5rem;
    margin-bottom: 1.5rem;
    transition: background-color 0.3s ease, border-color 0.3s ease;
}
#clickableButtonsContainer > div {
    display: flex;
    align-items: center;
    padding: 0.625rem;
    border-bottom: 1px solid var(--clickable-item-border);
    border-radius: 0.375rem;
    margin-bottom: 0.25rem;
    transition: background-color 0.2s ease, border-color 0.2s ease;
}
#clickableButtonsContainer > div:last-child {
    border-bottom: none;
    margin-bottom: 0;
}
#clickableButtonsContainer > div:hover {
    background-color: var(--clickable-item-hover-bg);
}
#clickableButtonsContainer label {
    margin-left: 0.5rem;
    font-size: 0.95rem;
    color: var(--text-color-light);
    flex-grow: 1;
}
#clickableButtonsContainer input[type="radio"] {
    margin-right: 0.5rem;
    flex-shrink: 0;
}
#clickControlSection label {
    display: block;
    font-size: 0.9rem;
    font-weight: 500;
    color: var(--text-color-light);
    margin-bottom: 0.75rem;
}
/* Highlight for selected clickable button */
.selected-button-highlight {
    background-color: var(--selected-button-highlight-bg);
    border-color: var(--selected-button-highlight-border);
    font-weight: 600;
}

/* Theme Toggle Switch */
.theme-switch {
  position: absolute;
  top: 1rem;
  right: 1rem;
  z-index: 10;
}
.theme-switch input {
  display: none; /* Hide default checkbox */
}
.slider {
  width: 44px;
  height: 24px;
  background: var(--border-color-light); /* Light mode slider background */
  border-radius: 24px;
  cursor: pointer;
  position: relative;
  transition: background 0.3s ease;
  display: block;
}
.slider::before {
  content: "";
  position: absolute;
  top: 2px;
  left: 2px;
  width: 20px;
  height: 20px;
  background: var(--text-color-light); /* Light mode knob color */
  border-radius: 50%;
  transition: transform 0.3s ease, background 0.3s ease;
}
/* When checked (dark mode active) */
input:checked + .slider {
    background: var(--primary-button-bg-light); /* Primary color for slider background in light mode */
}
input:checked + .slider::before {
  transform: translateX(20px);
  background: white; /* White knob when checked */
}

/* Dark Mode Overrides (apply when body has 'dark' class) */
body.dark {
    background-color: var(--bg-color-dark);
    color: var(--text-color-dark);
}
.main-container.dark {
    background-color: var(--card-bg-dark);
    border-color: var(--border-color-dark);
    /* Refined dark mode shadow */
    box-shadow: var(--main-container-shadow-dark);
}
.section-heading.dark, .card-heading.dark {
    color: var(--header-text-color-dark);
    border-color: var(--border-color-dark);
}
.card.dark {
    background-color: var(--card-bg-dark);
    border-color: var(--border-color-dark);
    /* Refined dark mode shadow for cards */
    box-shadow: var(--card-shadow-dark);
}
.action-button.primary.dark {
    background-color: var(--primary-button-bg-dark);
    border-color: var(--primary-button-border-dark);
    box-shadow: var(--primary-button-shadow-dark);
    --focus-ring-color-rgb: 79, 70, 229; /* indigo-600 RGB */
}
.action-button.primary.dark:hover:not(:disabled) {
    background-color: var(--primary-button-hover-bg-dark);
    box-shadow: 0 15px 30px -10px rgba(79, 70, 229, 0.5), 0 6px 10px -3px rgba(79, 70, 229, 0.3);
}
.action-button.emerald.dark {
    background-color: var(--emerald-button-bg-dark);
    border-color: var(--emerald-button-border-dark);
    box-shadow: var(--emerald-button-shadow-dark);
    --focus-ring-color-rgb: 6, 95, 70; /* emerald-800 RGB */
}
.action-button.emerald.dark:hover:not(:disabled) {
    background-color: var(--emerald-button-hover-bg-dark);
    box-shadow: 0 15px 30px -10px rgba(6, 95, 70, 0.5), 0 6px 10px -3px rgba(6, 95, 70, 0.3);
}
.action-button.secondary.dark {
    background-color: var(--secondary-button-bg-dark);
    color: var(--text-color-dark);
    border-color: var(--secondary-button-border-dark);
    box-shadow: var(--secondary-button-shadow-dark);
    --focus-ring-color-rgb: 74, 85, 104; /* gray-700 RGB */
}
.action-button.secondary.dark:hover:not(:disabled) {
    background-color: var(--secondary-button-hover-bg-dark);
    box-shadow: 0 12px 20px -8px rgba(74, 85, 104, 0.35), 0 5px 8px -2px rgba(74, 85, 104, 0.15);
}
.form-input.dark {
    border-color: var(--input-border-dark);
    background-color: var(--card-bg-dark);
    color: var(--text-color-dark);
}
.form-input.dark:focus {
    border-color: var(--input-focus-ring-dark);
    box-shadow: 0 0 0 3px rgba(var(--input-focus-ring-rgb-values-dark), 0.3);
}
.drop-area.dark {
    border-color: var(--drop-area-border-dark);
    background-color: var(--drop-area-bg-dark);
    box-shadow: var(--drop-area-inner-shadow-dark);
}
.drop-area.dark:hover {
    background-color: var(--drop-area-hover-bg-dark);
    border-color: var(--primary-button-bg-dark);
}
.drop-area.dark p {
    color: var(--drop-area-text-dark);
}
.drop-area.dark:hover p {
    color: var(--drop-area-hover-text-dark);
}
.browse-button.dark {
    background-color: var(--primary-button-bg-dark);
}
.browse-button.dark:hover {
    background-color: var(--primary-button-hover-bg-dark);
}
.file-status.message-success.dark {
  background-color: var(--file-status-success-bg-dark);
  border-color: var(--file-status-success-border-dark);
  color: var(--file-status-success-text-dark);
}
.file-status.message-success.dark #fileStatusIconAutoFill,
.file-status.message-success.dark #fileStatusIconFullAutomation { /* Updated IDs */
    color: var(--file-status-success-icon-dark);
}
.file-status.message-error.dark {
  background-color: var(--file-status-error-bg-dark);
  border-color: var(--file-status-error-border-dark);
  color: var(--file-status-error-text-dark);
}
.file-status.message-error.dark #fileStatusIconAutoFill,
.file-status.message-error.dark #fileStatusIconFullAutomation { /* Updated IDs */
    color: var(--file-status-error-icon-dark);
}
.file-status.message-info.dark {
  background-color: var(--file-status-info-bg-dark);
  border-color: var(--file-status-info-border-dark);
  color: var(--file-status-info-text-dark);
}
.file-status.message-info.dark #fileStatusIconAutoFill,
.file-status.message-info.dark #fileStatusIconFullAutomation { /* Updated IDs */
    color: var(--file-status-info-icon-dark);
}
.headers-list.dark span {
    background-color: var(--header-badge-bg-dark);
    color: var(--header-badge-text-dark);
    box-shadow: var(--header-badge-shadow-dark);
}
.headers-list.dark span:hover {
    background-color: var(--header-badge-hover-bg-dark);
}
.checkbox-label.dark, .radio-label.dark {
    color: var(--text-color-dark);
}
.checkbox-label.dark input[type="checkbox"], .radio-label.dark input[type="radio"] {
    border-color: var(--input-border-dark);
    background-color: var(--card-bg-dark);
}
.checkbox-label.dark input[type="checkbox"]:checked, .radio-label.dark input[type="radio"]:checked {
    background-color: var(--primary-button-bg-dark);
    border-color: var(--primary-button-bg-dark);
}
.checkbox-label.dark input[type="checkbox"]:focus, .radio-label.dark input[type="radio"]:focus {
    box-shadow: 0 0 0 3px rgba(var(--input-focus-ring-rgb-values-dark), 0.3);
}
/* Dark mode for generic message boxes */
.message-success.dark {
  background-color: #065f46; /* green-900 */
  border-left-color: #10b981; /* green-600 */
  color: #d1fae5; /* green-100 */
}
.message-error.dark {
  background-color: #7f1d1d; /* red-900 */
  border-left-color: #dc2626; /* red-600 */
  color: #fee2e2; /* red-100 */
}
.message-info.dark {
  background-color: #1e3a8a; /* blue-900 */
  border-left-color: #0284c7; /* light-blue-700 */
  color: #e0f2fe; /* blue-100 */
}
.auto-mapped-badge.learned.dark {
  background-color: var(--auto-mapped-learned-bg);
  color: var(--auto-mapped-learned-text);
}
.auto-mapped-badge.fuzzy.dark {
  background-color: var(--auto-mapped-fuzzy-bg);
  color: var(--auto-mapped-fuzzy-text);
}
.auto-mapped-badge.unmapped.dark {
  background-color: var(--auto-mapped-unmapped-bg);
  color: var(--auto-mapped-unmapped-text);
}
.tab-buttons.dark {
    background-color: var(--tab-button-bg-dark);
}
.tab-button.dark {
    color: var(--tab-button-text-dark);
}
.tab-button.dark:hover {
    background-color: var(--tab-button-hover-bg-dark);
}
.tab-button.active.dark {
    background-color: var(--tab-button-active-bg-dark);
    color: var(--tab-button-active-text-dark);
    box-shadow: var(--tab-button-active-shadow-dark);
}
#clickableButtonsContainer.dark {
    border-color: var(--clickable-item-border);
    background-color: var(--clickable-container-bg);
}
#clickableButtonsContainer.dark > div {
    border-color: var(--clickable-item-border);
}
#clickableButtonsContainer.dark > div:hover {
    background-color: var(--clickable-item-hover-bg);
}
#clickableButtonsContainer.dark label {
    color: var(--text-color-dark);
}
#clickControlSection.dark {
    border-color: var(--clickable-item-border);
    background-color: var(--clickable-container-bg);
}
#clickControlSection.dark label {
    color: var(--text-color-dark);
}
.selected-button-highlight.dark {
    background-color: var(--selected-button-highlight-bg);
    border-color: var(--selected-button-highlight-border);
}
/* Dark mode for theme switch slider */
.theme-switch input:checked + .slider.dark {
    background: var(--primary-button-bg-dark);
}
.theme-switch input:checked + .slider.dark::before {
  background: white;
}
.slider.dark {
    background: var(--border-color-dark);
}
.slider.dark::before {
  background: var(--text-color-dark);
}


/* Responsive adjustments for smaller screens */
@media (max-width: 480px) {
  .main-container {
    padding: 1rem;
  }
  .section-heading, .card-heading {
    font-size: 1rem;
    margin-bottom: 0.75rem;
  }
  .action-button {
    padding: 0.75rem 1.5rem; /* Adjusted for smaller screens */
    font-size: 0.9rem;
  }
  .browse-button {
    padding: 0.75rem 1.5rem;
    font-size: 1rem;
  }
  .drop-area {
    padding: 1.5rem;
    min-height: 8rem;
  }
  .drop-area p {
    font-size: 1rem;
  }
  .file-status {
    font-size: 0.85rem;
    padding: 0.75rem 1rem;
  }
  .headers-list span {
    padding: 0.4rem 0.8rem;
    font-size: 0.8rem;
  }
  .tab-button {
    padding: 0.5rem 0.75rem;
    font-size: 0.9rem;
  }
  .theme-switch {
    top: 0.75rem;
    right: 0.75rem;
  }
}
